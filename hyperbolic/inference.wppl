var start = { 
  loc : [2,0],
  dead : false,
  digest : 4
};

var donutUtility = makeDonutUtility(4, {
    'Donut' : [1, 0, 0, 0],
    'Veg'   : [0, 0, 0, 3.5],
    'Noodle': [0, 0, 0, 0]
});

var world = makeDonutWorldExtended({ bottomLeftNook : '#' });
var actual_agent = makeHyperbolicDiscounter(donutUtility, 500, 1, 'sophisticated', world);
var observed = simulate(start, world, actual_agent, 12, 12, 'both');

var posterior = Enumerate(function () {
  var discount = randomInteger(3); 
  var type = uniformDraw(['sophisticated', 'naive']);

  var agent = makeHyperbolicDiscounter(donutUtility, 500, discount, type, world);
  var agentAction = agent.agent;

  map(function (stateAction) {
    var state = stateAction[0];
    var action = stateAction[1];

    factor(agentAction(state, 0).score([], action)) ; 
  }, observed);

  return {
    type : type, 
    discount : discount
  };
});
console.log(posterior)
